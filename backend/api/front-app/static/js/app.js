(function(e){function t(t){for(var n,o,l=t[0],c=t[1],i=t[2],d=0,m=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,i||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("8a23"),r=a.n(n);r.a},"21bb":function(e,t,a){"use strict";var n=a("d63f"),r=a.n(n);r.a},"48e8":function(e,t,a){"use strict";var n=a("f9ce"),r=a.n(n);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}}),a("router-view")],1)},s=[],o=(a("034f"),a("2877")),l={},c=Object(o["a"])(l,r,s,!1,null,null,null),i=c.exports,u=a("9483");Object(u["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var d=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("nav",[a("v-navigation-drawer",{attrs:{app:"",clipped:"",temporary:"",absolute:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},e._l(e.links,(function(t){return a("v-list-item",{key:t.text,on:{click:function(a){a.stopPropagation(),e.viewName=t.compName}}},[a("v-list-item-action",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-item-content",[e._v(e._s(t.text))])],1)})),1)],1)],1),a("v-app-bar",{attrs:{"clipped-left":"",app:"",color:"primary",dark:"","extension-height":"100%"}},[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("v-toolbar-title",{staticClass:"font-italic font-weight-bold"},[e._v(" "+e._s(e.settlementName)+" ")]),a("v-spacer"),a("v-spacer"),a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{color:"primary"}},n),[e._v(" "+e._s(e.currentUserName)+" ")])]}}])},[a("v-list",[a("v-list-item",[a("v-list-item-title",[e._v("Logout")])],1)],1)],1),e.isAdmin?a("v-dialog",{ref:"dialog",attrs:{"return-value":e.date,persistent:"",width:"25%"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({staticClass:"datePickerTxtField",attrs:{"prepend-inner-icon":"event","hide-details":"auto",readonly:"",dense:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},n))]}}],null,!1,1625869963),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("v-date-picker",{attrs:{type:"date",scrollable:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modal=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.date)}}},[e._v("OK")])],1)],1):e._e()],1),a("v-content",{staticStyle:{"padding-top":"0px"}},[a("v-container",{attrs:{fluid:"",dense:""}},[a(e.viewName,{key:e.viewName+e.componentKey,tag:"component"})],1)],1)],1)},f=[],p=(a("99af"),a("fb6a"),a("5530")),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-alert",{attrs:{type:"error",dismissible:""},model:{value:e.addEntryError,callback:function(t){e.addEntryError=t},expression:"addEntryError"}},[e._v(" "+e._s(e.alertErrorMessage)+" ")]),a("v-form",{ref:"addEntryForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",{staticClass:"text-center",attrs:{dense:""}},[a("v-col",{attrs:{cols:"2"}},[a("v-autocomplete",{attrs:{items:e.entryCategoryOptions,"return-object":"",rules:[function(e){return!!e||"Category is required"}],label:"Select Option","item-text":"name","item-value":"id","cache-items":""},on:{change:e.expCatgeorySelection},model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-autocomplete",{attrs:{items:e.entityOptions,rules:[function(e){return!!e||"Entity is required"}],label:"Select Option","return-object":"","item-text":"name","item-value":"id","menu-props":e.menuProps},on:{change:e.entitySelection},model:{value:e.entitySelected,callback:function(t){e.entitySelected=t},expression:"entitySelected"}})],1),e.isAdmin?a("v-col",{attrs:{cols:"1"}},[a("v-autocomplete",{attrs:{items:e.mode,rules:[function(e){return!!e||"Mode  is required"}],label:"Select","cache-items":""},on:{change:e.modeSelection},model:{value:e.modeSelected,callback:function(t){e.modeSelected=t},expression:"modeSelected"}})],1):e._e(),a("v-col",{attrs:{cols:"2"}},[a("v-text-field",{attrs:{type:"number",rules:[function(e){return!!e||"Amount  is required"}],label:"Amount","aria-required":"true",clearable:""},model:{value:e.enteredAmount,callback:function(t){e.enteredAmount=t},expression:"enteredAmount"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{rules:[function(e){return!!e||"Comment  is required"}],label:"Comment",clearable:""},model:{value:e.enteredComment,callback:function(t){e.enteredComment=t},expression:"enteredComment"}})],1),a("v-col",{staticClass:"text-center",attrs:{cols:"2",sm:"2"}},[a("div",{staticClass:"my-2"},[a("v-btn",{attrs:{large:"",color:"primary"},on:{click:e.addRow}},[e._v("Add")])],1)])],1)],1),a("v-data-table",{attrs:{headers:e.headers,items:e.cashOutRecords,"item-key":"id",dense:""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.expense_category))]),a("td",[e._v(e._s(t.item.entity_name))]),a("td",[e._v(e._s(t.item.amount))]),a("td",[e._v(e._s(t.item.comment))]),a("td",[a("v-icon",{attrs:{small:"",color:"red",dense:""},on:{click:function(a){return e.deleteItem(t.item)}}},[e._v(" delete ")])],1)])]}}])}),a("v-row",{attrs:{dense:""}},[a("v-col",{staticClass:"text-center"}),a("v-col",{staticClass:"text-center"},[a("v-card",{attrs:{color:"teal lighten-1"}},[e._v("Total Cash Expenses: "+e._s(this.totalCashExpense)+" ")])],1),a("v-col",{staticClass:"text-center"},[e._v("Total Expenses: "+e._s(this.totalExpense)+" ")])],1)],1)},v=[],g=(a("c975"),a("a434"),a("bc3a")),y=a.n(g),b=a("2f62"),_={name:"EntriesGrid",components:{},methods:{expCatgeorySelection:function(e){var t=this;console.log(e),this.cashOutRecord={},this.cashOutRecord.category=e.id,e.expense_category=e.expense_category||"",y.a.get("".concat("","/api/entity/?type=").concat(e.entity_type,"&category=").concat(e.expense_category)).then((function(e){e.data.length>0&&(t.entityOptions=e.data)}))["catch"]((function(e){console.log("error while fetching entities",e)}))},entitySelection:function(e){this.cashOutRecord.entity=e.id,this.cashOutRecord.expenceCategory=e.expense_category},modeSelection:function(e){null===e||void 0===e?(this.cashOutRecord.mode="CA",this.modeSelected="CA"):(this.cashOutRecord.mode=e,this.modeSelected=e)},addRow:function(){var e=this;this.$refs.addEntryForm.validate()&&(this.cashOutRecord.amount=this.enteredAmount,this.cashOutRecord.comment=this.enteredComment,this.cashOutRecord.date=this.settlementDate,this.cashOutRecord.settlement=this.settlementId,this.cashOutRecord.created_by=this.currentUserName,y()({method:"POST",url:"".concat("","/api/entry/"),data:this.cashOutRecord,xsrfHeaderName:"X-CSRFToken"}).then((function(t){e.$refs.addEntryForm.reset(),e.cashOutRecords.push(t.data),e.updateTotalExpenses()}))["catch"]((function(t){e.alertErrorMessage="error while adding the entry please call admin.",e.addEntryError=!0,console.log("error while creating an entry",t)})))},deleteItem:function(e){var t=this;y()({method:"DELETE",url:"".concat("","/api/entry/").concat(e.id,"/"),xsrfHeaderName:"X-CSRFToken"}).then((function(a){var n=t.cashOutRecords.indexOf(e);t.cashOutRecords.splice(n,1),t.updateTotalExpenses()}))["catch"]((function(e){t.alertErrorMessage="error while deleting the entry please call admin.",t.addEntryError=!0,console.log("error while deleting the entry",e)}))},updateTotalExpenses:function(){var e=this;y.a.get("".concat("","/api/settlement/").concat(this.settlementId,"/")).then((function(t){e.$store.commit("setTotalExpense",t.data.expense),e.$store.commit("setTotalCashExpense",t.data.cash_expense)}))["catch"]((function(e){console.log("error while fetching settlment data",e)}))}},data:function(){return{valid:!0,selectedCategory:"",entitySelected:"",modeSelected:null,enteredAmount:null,enteredComment:null,entryCategoryOptions:[],entityOptions:[],showSubCategory:!1,displayAdd:!1,addEntryError:!1,alertErrorMessage:"",mode:[{value:"CA",text:"CASH"},{value:"AC",text:"ACCOUNT"},{value:"TR",text:"TRESSURE"}],headers:[{text:"Expence Category",value:"expenceCategory",align:"center",sortable:!0},{text:"Entity",value:"entity",align:"center",sortable:!1},{text:"Amount",value:"amount",align:"center",sortable:!1},{text:"Comment",value:"comment",align:"center",sortable:!1},{text:"Action",vlaue:"action",align:"center",sortable:!1}],menuProps:{closeOnClick:!1,closeOnContentClick:!1,disableKeys:!0,openOnClick:!1,maxHeight:304,auto:!0,dense:!0},cashOutRecord:{},cashOutRecords:[]}},created:function(){var e=this;y.a.get("".concat("","/api/entry-category/")).then((function(t){e.entryCategoryOptions=t.data}))["catch"]((function(e){console.log("error while fetching entry-category",e)}))},mounted:function(){var e=this;y.a.get("".concat("","/api/entry/?settlement=").concat(this.settlementId)).then((function(t){e.cashOutRecords=t.data,e.updateTotalExpenses()}))["catch"]((function(e){console.log("error while fetching existing entries",e)}))},computed:Object(p["a"])({},Object(b["c"])(["totalCashExpense","totalExpense","settlementId","currentUserName","settlementDate"]),{},Object(b["b"])(["currentUserName","isAdmin"]))},C=_,x=a("6544"),S=a.n(x),w=a("0798"),E=a("c6a6"),k=a("8336"),O=a("b0af"),A=a("62ad"),V=a("a523"),D=a("8fea"),N=a("4bd4"),T=a("132d"),I=a("0fd9"),R=a("8654"),U=Object(o["a"])(C,h,v,!1,null,null,null),j=U.exports;S()(U,{VAlert:w["a"],VAutocomplete:E["a"],VBtn:k["a"],VCard:O["a"],VCol:A["a"],VContainer:V["a"],VDataTable:D["a"],VForm:N["a"],VIcon:T["a"],VRow:I["a"],VTextField:R["a"]});var M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[[a("v-container",{attrs:{"grid-list-md":""}},[a("v-alert",{attrs:{type:"error",dismissible:""},model:{value:e.errAlert,callback:function(t){e.errAlert=t},expression:"errAlert"}},[e._v(" "+e._s(e.errorMessage)+" ")]),a("v-alert",{attrs:{type:"success",dismissible:""},model:{value:e.sucessAlert,callback:function(t){e.sucessAlert=t},expression:"sucessAlert"}},[e._v(" "+e._s(e.successMessage)+" ")]),a("v-alert",{attrs:{prominent:"",type:"error"},model:{value:e.deleteAlert,callback:function(t){e.deleteAlert=t},expression:"deleteAlert"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"grow"},[e._v("This will delete Settlement, SaleSummary and Expense Entries for the selected day. "),a("br"),a("b",[e._v("Are you sure?")])]),a("v-col",{staticClass:"shrink"},[a("v-btn",{on:{click:e.deleteSettlement}},[e._v("Confirm Delete")])],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:7}},[a("div",{staticClass:"PaymentAppsLayout"},[a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("tbody",[a("v-row",[a("v-col",[a("v-sheet",{staticClass:"white--text font-weight-bold",attrs:{color:"teal ligten-1",elevation:5}},[a("v-row",{staticClass:"salesummary-heading"},[a("v-col",{attrs:{cols:5}},[e._v(" Software ")]),a("v-col",{attrs:{cols:5}},[e._v(" Cashier ")]),a("v-col",{attrs:{cols:1}},[e._v(" Diff ")])],1)],1)],1)],1),e._l(e.processedTableLayoutData,(function(t){return a("tr",{key:t.nm},[a("v-simple-table",{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("tbody",[a("v-container",{staticClass:"category-container"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:10}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:6}},[a("td",e._l(t.Sft,(function(t){return a("tr",{key:"Sft"+t.name,staticClass:"row-sale-app"},[a("td",{staticClass:"text-left pay-app-name-td"},[e._v(" "+e._s(t.display_name)+" ")]),a("td",{staticClass:"pay-app-value-td"},[a("v-text-field",{ref:"Sft-"+t.name+"-Value",refInFor:!0,attrs:{type:"number","hide-details":"",dense:"","single-line":""},model:{value:e.softwareSaleData[t.name],callback:function(a){e.$set(e.softwareSaleData,t.name,e._n(a))},expression:"softwareSaleData[payApp.name]"}})],1)])})),0)]),a("v-col",{attrs:{cols:6}},[a("td",e._l(t.Mgr,(function(t){return a("tr",{key:"Mgr"+t.name,staticClass:"row-sale-app"},[a("td",{staticClass:"text-left pay-app-name-td"},[e._v(" "+e._s(t.display_name)+" ")]),a("td",{staticClass:"pay-app-value-td"},[a("v-text-field",{ref:"Mgr-"+t.name+"-Value",refInFor:!0,attrs:{type:"number","hide-details":"",dense:"","single-line":""},model:{value:e.managerSaleData[t.name],callback:function(a){e.$set(e.managerSaleData,t.name,e._n(a))},expression:"managerSaleData[payApp.name]"}})],1)])})),0)])],1)],1),a("v-col",{attrs:{cols:1}},["Generic"===t.nm?[a("td",e._l(t.Sft,(function(t){return a("tr",{key:"Diff"+t.name,staticClass:"row-sale-app"},[a("td",{staticClass:"pay-app-diff-td"},[e._v(" "+e._s(e.getPayAppDiff(e.softwareSaleData[t.name],e.managerSaleData[t.name]))+" ")])])})),0)]:[a("td",[a("tr",{staticClass:"row-sale-app"},[a("td",{staticClass:"pay-app-diff-td"},[e._v(" "+e._s(e.getCategoryDiff(t.Sft,t.Mgr))+" ")])])])]],2)],1)],1)],1)]},proxy:!0}],null,!0)})],1)})),a("v-row",[a("v-col",[a("v-sheet",{staticClass:"white--text font-weight-bold",attrs:{color:"teal ligten-1",elevation:5}},[a("v-row",{staticClass:"totals-bar"},[a("v-col",{attrs:{cols:5}},[e._v(" Total: "+e._s(e.softwareSale)+" ")]),a("v-col",{attrs:{cols:5}},[e._v(" Total: "+e._s(e.managerSale)+" ")]),a("v-col",{attrs:{cols:1}},[e._v(" "+e._s(e.saleDiff)+" ")])],1)],1)],1)],1)],2)]},proxy:!0}])})],1)]),a("v-col",{attrs:{cols:4}},[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",[a("v-simple-table",{attrs:{name:"cash-details"},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("th",{staticClass:"text-right"},[e._v(" Cash Details ")]),a("th",{staticClass:"text-right"},[a("v-dialog",{attrs:{"max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-icon",e._g({},n),[e._v("money")])]}}]),model:{value:e.cashCalcDialog,callback:function(t){e.cashCalcDialog=t},expression:"cashCalcDialog"}},[a("CashCalc",{on:{"cash-update":e.onCashUpdate}})],1)],1)]),a("tbody",[a("tr",[a("td",[e._v("Opening Cash:")]),a("td",[e._v(e._s(e.openingCash))])]),a("tr",[a("td",[e._v("Closing Cash:")]),a("td",[e._v(e._s(e.closingCash))])])])]},proxy:!0}])})],1),a("v-row",[a("v-simple-table",{staticClass:"actions-table",attrs:{name:"actions"},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("th",{staticClass:"text-center",attrs:{width:"190"}},[e._v("Actions")])]),a("tbody",[a("tr",[a("v-btn",{attrs:{block:"",large:""},on:{click:e.saveSettlementAndSale}},[e._v("SAVE")])],1),a("tr",[a("v-btn",{attrs:{block:"",large:"",color:"primary",disabled:e.closeButtonDisabled},on:{click:e.closeSettlement}},[e._v("CLOSE")])],1),a("tr",[a("v-btn",{attrs:{block:"",large:"",color:"error"},on:{click:function(t){e.deleteAlert=!0}}},[e._v("DELETE")])],1)])]},proxy:!0}])})],1)],1)],1)],1)],1)]],2)},$=[],P=(a("4160"),a("13d5"),a("b0c0"),a("a9e3"),a("07ac"),a("ac1f"),a("5319"),a("159b"),a("4795"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Cash Count")])]),a("v-card-text",[a("v-container",{attrs:{name:"cash-calc"}},[a("v-simple-table",{attrs:{height:"300px",dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Denomination")]),a("th",{staticClass:"text-left"},[e._v("Count")]),a("th",{staticClass:"text-left"},[e._v("Amount")])])]),a("tbody",[e._l(e.denominations,(function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t[0])+" X")]),a("td",{attrs:{width:"15"}},[a("v-text-field",{attrs:{type:"number","hide-details":"",dense:"","single-line":"",height:"10"},model:{value:t[1],callback:function(a){e.$set(t,1,a)},expression:"item[1]"}})],1),a("td",[e._v(e._s(t[0]*t[1]))])])})),a("tr",[a("td"),a("td",[e._v("Total:")]),a("td",[e._v(e._s(e.totalCash))])])],2)]},proxy:!0}])})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.updateCash("close")}}},[e._v("Close")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.updateCash("save")}}},[e._v("Save")])],1)],1)}),F=[],L={name:"CashCalc",methods:{updateCash:function(e){var t=null;"save"===e&&(t=this.totalCash),this.$emit("cash-update",t)}},data:function(){return{denominations:[[2e3,0],[500,0],[200,0],[100,0],[50,0],[20,0],[10,0],[5,0],[2,0],[1,0]]}},computed:{totalCash:function(){var e=0;return this.denominations.forEach((function(t){e+=t[0]*t[1]})),e}}},B=L,H=a("99d9"),q=a("1f4f"),G=a("2fa4"),X=Object(o["a"])(B,P,F,!1,null,null,null),J=X.exports;S()(X,{VBtn:k["a"],VCard:O["a"],VCardActions:H["a"],VCardText:H["b"],VCardTitle:H["c"],VContainer:V["a"],VSimpleTable:q["a"],VSpacer:G["a"],VTextField:R["a"]});var K={name:"SaleSummary",components:{CashCalc:J},methods:{validateData:function(){},saveSettlementAndSale:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a={opening_cash:this.openingCash,closing_cash:this.closingCash,cash_expense:this.totalCashExpense,expense:this.totalExpense,last_modified_by:this.currentUserName,date:this.settlementDate,name:this.settlementName,id:this.settlementId},n="Saved Successfully!";1==t&&(a.is_closed=!0,a.closed_by=this.currentUserName,n="Closed Successfully!");var r={date:this.settlementDate,software_data:JSON.stringify(this.softwareSaleData),manager_data:JSON.stringify(this.managerSaleData),software_sale:this.softwareSale,manager_sale:this.managerSale,software_discount:this.discount,last_modified_by:this.currentUserName,settlement:this.settlementId},s="POST",o="";null!==this.saleSummaryId&&(o=this.saleSummaryId+"/",s="PUT"),y()({method:"PUT",url:"".concat("","/api/settlement/").concat(this.settlementId,"/"),data:a,xsrfHeaderName:"X-CSRFToken"}).then((function(t){y()({method:s,url:"".concat("","/api/sale-summary/").concat(o),data:r,xsrfHeaderName:"X-CSRFToken"}).then((function(t){e.successMessage=n,e.sucessAlert=!0,null===e.saleSummaryId&&(e.saleSummaryId=t.data.id)}))["catch"]((function(t){e.errorMessage="error while saving, call admin.",e.errAlert=!0,console.log("error while saving sale summary data",t)}))}))["catch"]((function(t){e.errorMessage="error while saving, call admin.",e.errAlert=!0,console.log("error while saving settlement data",t)}))},closeSettlement:function(){this.saveSettlementAndSale(!0)},deleteSettlement:function(){var e=this;this.deleteAlert=!1,y()({method:"DELETE",url:"".concat("","/api/settlement/").concat(this.settlementId,"/"),xsrfHeaderName:"X-CSRFToken"}).then((function(t){e.successMessage="Settlement Deleted!",e.sucessAlert=!0,Be.push({path:"home"})}))["catch"]((function(t){e.errorMessage="error while deleting the Settlement please call admin.",e.errAlert=!0,console.log("error while deleting the Settlement",t)}))},getPayAppDiff:function(e,t){return Number(e||0)-Number(t||0)},getCategoryDiff:function(e,t){for(var a=0,n=0,r=0,s=0;s<e.length;s++)a+=Number(this.softwareSaleData[e[s].name]||0);for(var o=0;o<t.length;o++)n+=Number(this.managerSaleData[t[o].name]||0);return r=Number(a)-Number(n),r},makeTableLayoutData:function(){var e={};return this.layoutInfo.forEach((function(t){var a=t.category_nm;null==a&&(a="Generic"),e[a]=e[a]||{nm:a,Mgr:[],Sft:[]},"MANAGER"!==t.display_in&&"BOTH"!==t.display_in||e[a].Mgr.push({name:t.name,display_name:t.display_name}),"SOFTWARE"!==t.display_in&&"BOTH"!==t.display_in||e[a].Sft.push({name:t.name,display_name:t.display_name})})),this.processedTableLayoutData=e,e},onCashUpdate:function(e){this.cashCalcDialog=!1,null!=e&&(this.closingCash=e)}},data:function(){return{saleSummaryId:null,layoutInfo:[],processedTableLayoutData:{},softwareSaleData:{},managerSaleData:{},softwareSale:0,managerSale:0,discount:0,closingCash:0,openingCash:0,cashCalcDialog:!1,errorMessage:"",errAlert:!1,successMessage:"",sucessAlert:!1,deleteAlert:!1}},created:function(){var e=this;y.a.get("".concat("","/api/payment-mode/")).then((function(t){e.layoutInfo=t.data,y.a.get("".concat("","/api/sale-summary/?settlement=").concat(e.settlementId)).then((function(t){t.data.length>0&&(e.softwareSaleData=JSON.parse(t.data[0].software_data.replace(/'/g,'"')),e.managerSaleData=JSON.parse(t.data[0].manager_data.replace(/'/g,'"')),e.softwareSale=t.data[0].software_sale,e.managerSale=t.data[0].manager_sale,e.discount=t.data[0].software_discount,e.saleSummaryId=t.data[0].id),e.makeTableLayoutData()}))["catch"]((function(e){console.log("error while fetching sale-summary data",e)}))}))["catch"]((function(e){console.log("error while fetching available payment modes",e)})),y.a.get("".concat("","/api/settlement/").concat(this.settlementId,"/")).then((function(t){e.openingCash=t.data.opening_cash,e.closingCash=t.data.closing_cash}))["catch"]((function(e){console.log("error while fetching settlment data",e)}))},mounted:function(){setTimeout((function(){}),2e3)},computed:Object(p["a"])({},Object(b["c"])(["currentUserInfo","settlementId","totalCashExpense","totalExpense","settlementDate","settlementName"]),{},Object(b["b"])(["currentUserName"]),{saleDiff:function(){return this.softwareSale-this.managerSale},closeButtonDisabled:function(){return this.closingCash+this.totalCashExpense-this.openingCash!==this.managerSaleData.Cash||0!=this.saleDiff}}),watch:{softwareSaleData:{deep:!0,handler:function(e){this.softwareSale=Object.values(e).reduce((function(e,t){return Number(e)+Number(t)}))}},managerSaleData:{deep:!0,handler:function(e){this.managerSale=Object.values(e).reduce((function(e,t){return Number(e)+Number(t)}))}}}},z=K,W=(a("48e8"),a("7496")),Q=a("169a"),Y=a("8dd9"),Z=Object(o["a"])(z,M,$,!1,null,null,null),ee=Z.exports;S()(Z,{VAlert:w["a"],VApp:W["a"],VBtn:k["a"],VCol:A["a"],VContainer:V["a"],VDialog:Q["a"],VIcon:T["a"],VRow:I["a"],VSheet:Y["a"],VSimpleTable:q["a"],VTextField:R["a"]});var te={name:"Home",components:{EntriesGrid:j,SaleSummary:ee},data:function(){return{drawer:!1,clipped:!0,viewName:"EntriesGrid",modal:!1,links:[{icon:"home",text:"CashOut Entries",route:"/",compName:"EntriesGrid"},{icon:"folder",text:"Sale Summary",route:"/salesummary",compName:"SaleSummary"}],componentKey:0}},computed:Object(p["a"])({},Object(b["c"])(["currentUserInfo","settlementName"]),{},Object(b["b"])(["currentUserName","isAdmin"]),{date:{get:function(){var e=this.$store.state.settlementDate,t=e.slice(6,10),a=e.slice(3,5),n=e.slice(0,2);return"".concat(t,"-").concat(a,"-").concat(n)},set:function(e){var t=e.slice(0,4),a=e.slice(5,7),n=e.slice(8,10);this.$store.commit("setSettlementDate","".concat(n,"-").concat(a,"-").concat(t))}}}),watch:{date:function(){var e=this;y.a.get("".concat("","/api/settlement/?date=").concat(this.date)).then((function(t){e.$store.commit("setInitState",t.data[0]),e.componentKey+=1}))["catch"]((function(e){console.log("error while fetching new settlement info",e)}))}}},ae=te,ne=(a("21bb"),a("40dc")),re=a("5bc1"),se=a("a75b"),oe=a("2e4b"),le=a("8860"),ce=a("da13"),ie=a("1800"),ue=a("5d23"),de=a("e449"),me=a("f774"),fe=a("2a7f"),pe=Object(o["a"])(ae,m,f,!1,null,null,null),he=pe.exports;S()(pe,{VApp:W["a"],VAppBar:ne["a"],VAppBarNavIcon:re["a"],VBtn:k["a"],VContainer:V["a"],VContent:se["a"],VDatePicker:oe["a"],VDialog:Q["a"],VIcon:T["a"],VList:le["a"],VListItem:ce["a"],VListItemAction:ie["a"],VListItemContent:ue["a"],VListItemTitle:ue["b"],VMenu:de["a"],VNavigationDrawer:me["a"],VSpacer:G["a"],VTextField:R["a"],VToolbarTitle:fe["a"]});var ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("div",{staticClass:"login"},[a("UserLogin")],1)])},ge=[],ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[e.showError?a("v-alert",{attrs:{type:"error",dismissible:""}},[e._v("Invalid User Details")]):e._e(),a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("User Login")]),a("v-spacer")],1),a("v-card-text",[a("v-form",{ref:"form"},[a("v-autocomplete",{key:e.userName,attrs:{label:"Select User",name:"login","prepend-icon":"person",items:e.userNames,rules:[function(e){return!!e||"User Name is required"}]},on:{change:e.userNameChange},nativeOn:{click:function(t){e.showError=!1}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),a("v-text-field",{attrs:{rules:[function(e){return!!e||"Password is required"}],id:"password",label:"Password",name:"password","prepend-icon":"lock",type:"password",clearable:""},nativeOn:{click:function(t){e.showError=!1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.login(t)}}},[e._v("Login")])],1)],1)],1)],1)],1)],1)},be=[],_e={name:"UserLogin",methods:{login:function(){var e=this;if(this.invalidUser=!0,this.$refs.form.validate()){var t=new FormData;t.set("username",this.userName),t.set("password",this.password),y()({method:"POST",url:"".concat("","/api/auth/login/"),data:t,headers:{"Content-Type":"multipart/form-data"},xsrfHeaderName:"X-CSRFToken"}).then((function(t){e.invalidUser=!1,e.$store.commit("setCurrentUserInfo",t.data),e.invalidUser?(e.password="",e.showError=!0):Be.push({path:"home"})}))["catch"]((function(e){console.log("error while trying to authenticate",e)}))}},userNameChange:function(){},resetModel:function(){}},data:function(){return{valid:!0,showError:!1,invalidUser:!1,userName:"",password:"",userNames:[]}},created:function(){var e=this;y.a.get("".concat("","/api/auth/users/")).then((function(t){e.userNames=t.data.users}))["catch"]((function(e){console.log("error while fetching user list",e)}))},computed:Object(p["a"])({},Object(b["c"])(["currentUserInfo"]))},Ce=_e,xe=a("71d9"),Se=Object(o["a"])(Ce,ye,be,!1,null,null,null),we=Se.exports;S()(Se,{VAlert:w["a"],VAutocomplete:E["a"],VBtn:k["a"],VCard:O["a"],VCardActions:H["a"],VCardText:H["b"],VCol:A["a"],VContainer:V["a"],VContent:se["a"],VForm:N["a"],VRow:I["a"],VSpacer:G["a"],VTextField:R["a"],VToolbar:xe["a"],VToolbarTitle:fe["a"]});var Ee={name:"Login",components:{UserLogin:we},created:function(){var e=this;y.a.get("".concat("","/api/settlement/latest/")).then((function(t){e.$store.commit("setInitState",t.data)}))["catch"]((function(e){console.log("error while fetching new settlement info",e)}))}},ke=Ee,Oe=Object(o["a"])(ke,ve,ge,!1,null,null,null),Ae=Oe.exports;S()(Oe,{VApp:W["a"]});var Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("div",{staticClass:"reports"},[a("h2",[e._v("Peports: comming soon")])])])},De=[],Ne={name:"Reports",components:{}},Te=Ne,Ie=Object(o["a"])(Te,Ve,De,!1,null,null,null),Re=Ie.exports;S()(Ie,{VApp:W["a"]});var Ue=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},je=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("h1",[e._v("This is an about page")])])}],Me={},$e=Object(o["a"])(Me,Ue,je,!1,null,null,null),Pe=$e.exports;n["default"].use(d["a"]);var Fe=[{path:"/",name:"Login",component:Ae},{path:"/home",name:"Home",component:he},{path:"/reports",name:"Reports",component:Re},{path:"/about",name:"About",component:Pe}],Le=new d["a"]({mode:"history",base:"/",routes:Fe}),Be=Le;n["default"].use(b["a"]);var He=new b["a"].Store({state:{settlementDate:"00-00-0000",settlementId:"",settlementName:"NA",totalCashExpense:0,totalExpense:0,currentUserInfo:{}},mutations:{setInitState:function(e,t){e.settlementDate=t.date,e.settlementId=t.id,e.settlementName=t.name,e.totalCashExpense=t.cash_expense,e.totalExpense=t.expense},setCurrentUserInfo:function(e,t){e.currentUserInfo=t},setTotalExpense:function(e,t){e.totalExpense=t},setTotalCashExpense:function(e,t){e.totalCashExpense=t},setSettlementDate:function(e,t){e.settlementDate=t}},getters:{currentUserName:function(e){return void 0==e.currentUserInfo.username?"NA":e.currentUserInfo.username},isAdmin:function(e){return 1==e.currentUserInfo.is_staff}},actions:{},modules:{}}),qe=(a("d1e78"),a("ce5b")),Ge=a.n(qe);a("bf40");n["default"].use(Ge.a);var Xe={icons:{iconfont:"md"}},Je=new Ge.a(Xe);n["default"].config.productionTip=!1,new n["default"]({router:Be,store:He,vuetify:Je,Vuex:b["a"],render:function(e){return e(i)}}).$mount("#app")},"8a23":function(e,t,a){},d63f:function(e,t,a){},f9ce:function(e,t,a){}});
//# sourceMappingURL=app.js.map